--- file.c	2021-07-23 12:11:15.000000000 +0200
+++ file.c	2021-08-06 20:08:10.971108060 +0200
@@ -444,13 +447,17 @@
 		/* Error occured */
 		return ret;
 	if((uint32_t)ret > requestedLen)
+		/* More data than requested may be written to lower
+		 * levels if batch mode is active, in order to "pad"
+		 * the last cluster of a file, so that we don't have
+		 * to read that back from disk */
 		bytesWritten = requestedLen;
 	else
-		bytesWritten = requestedLen;
+		bytesWritten = (uint32_t)ret;
 	if (where + bytesWritten > This->FileSize )
 		This->FileSize = where + bytesWritten;
 	recalcPreallocSize(This);
-	return ret;
+	return (ssize_t)bytesWritten;
 }
 
 
